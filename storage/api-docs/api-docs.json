{
    "openapi": "3.0.0",
    "info": {
        "title": "My TravelBlog API",
        "description": "API documentation for the TravelBlogJP project",
        "version": "1.0.0"
    },
    "paths": {
        "/api/articles": {
            "get": {
                "tags": [
                    "Articles"
                ],
                "summary": "取得所有文章",
                "operationId": "11aa4cc6561a7b94c56d1201d62513ee",
                "responses": {
                    "200": {
                        "description": "成功取得文章列表"
                    }
                }
            },
            "post": {
                "tags": [
                    "Articles"
                ],
                "summary": "建立新文章",
                "operationId": "e328bed23caf889ad982ad3f1180bccb",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "title",
                                    "body"
                                ],
                                "properties": {
                                    "title": {
                                        "type": "string",
                                        "example": "旅日遊記"
                                    },
                                    "body": {
                                        "type": "string",
                                        "example": "內容詳述..."
                                    },
                                    "category_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "tags": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "成功建立文章"
                    }
                }
            }
        },
        "/api/articles/{id}": {
            "get": {
                "tags": [
                    "Articles"
                ],
                "summary": "取得指定文章",
                "operationId": "b3e529eab04efb5d305b07e2e58d9869",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功取得文章"
                    },
                    "404": {
                        "description": "找不到文章"
                    }
                }
            },
            "put": {
                "tags": [
                    "Articles"
                ],
                "summary": "更新指定文章",
                "operationId": "2717d5a8e3b1f16637aded325347f9ad",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "title",
                                    "body"
                                ],
                                "properties": {
                                    "title": {
                                        "type": "string",
                                        "example": "更新後的標題"
                                    },
                                    "body": {
                                        "type": "string",
                                        "example": "更新後的內容"
                                    },
                                    "category_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "tags": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "成功更新文章"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Articles"
                ],
                "summary": "刪除文章",
                "operationId": "97f34592611a1dd53a086865e29706c9",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "成功刪除"
                    }
                }
            }
        },
        "/api/categories": {
            "get": {
                "tags": [
                    "Categories"
                ],
                "summary": "Get all categories",
                "description": "Retrieve a list of all categories with their article counts",
                "operationId": "getCategories",
                "responses": {
                    "200": {
                        "description": "Categories successfully retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Category"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            },
            "post": {
                "tags": [
                    "Categories"
                ],
                "summary": "Create a new category",
                "description": "Create a new category with a name, slug, and optional parent category",
                "operationId": "createCategory",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {}
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Category successfully created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Category"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            }
        },
        "/api/categories/{categoryId}/edit": {
            "get": {
                "tags": [
                    "Categories"
                ],
                "summary": "Show edit form for a category",
                "description": "Display the form to edit an existing category",
                "operationId": "editCategory",
                "parameters": [
                    {
                        "name": "categoryId",
                        "in": "path",
                        "description": "Category ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Category edit form successfully retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Category"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Category not found"
                    }
                }
            }
        },
        "/api/categories/{categoryId}": {
            "put": {
                "tags": [
                    "Categories"
                ],
                "summary": "Update an existing category",
                "description": "Update the details of an existing category",
                "operationId": "updateCategory",
                "parameters": [
                    {
                        "name": "categoryId",
                        "in": "path",
                        "description": "Category ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {}
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Category successfully updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Category"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request"
                    },
                    "404": {
                        "description": "Category not found"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Categories"
                ],
                "summary": "Delete a category",
                "description": "Delete an existing category from the system",
                "operationId": "deleteCategory",
                "parameters": [
                    {
                        "name": "categoryId",
                        "in": "path",
                        "description": "Category ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Category successfully deleted"
                    },
                    "404": {
                        "description": "Category not found"
                    }
                }
            }
        },
        "/api/favorite-lists": {
            "post": {
                "tags": [
                    "Favorite Lists"
                ],
                "summary": "Create a new favorite list",
                "description": "Create a new favorite list for the authenticated user.",
                "operationId": "storeFavoriteList",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {}
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Favorite list created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/FavoriteList"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            }
        },
        "/api/favorite-lists/{favoriteListId}": {
            "put": {
                "tags": [
                    "Favorite Lists"
                ],
                "summary": "Update an existing favorite list",
                "description": "Update the name of a specific favorite list.",
                "operationId": "updateFavoriteList",
                "parameters": [
                    {
                        "name": "favoriteListId",
                        "in": "path",
                        "description": "ID of the favorite list to update",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {}
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Favorite list updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/FavoriteList"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    },
                    "403": {
                        "description": "Forbidden, unauthorized action"
                    },
                    "404": {
                        "description": "Favorite list not found"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Favorite Lists"
                ],
                "summary": "Delete a favorite list",
                "description": "Delete a specific favorite list.",
                "operationId": "deleteFavoriteList",
                "parameters": [
                    {
                        "name": "favoriteListId",
                        "in": "path",
                        "description": "ID of the favorite list to delete",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Favorite list deleted successfully"
                    },
                    "403": {
                        "description": "Forbidden, cannot delete default list"
                    },
                    "404": {
                        "description": "Favorite list not found"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            }
        },
        "/api/users/{slug}": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "取得使用者個人頁資訊",
                "operationId": "bb4a4d9489c582a76a7790428b28b83e",
                "parameters": [
                    {
                        "name": "slug",
                        "in": "path",
                        "description": "使用者的 slug",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功取得使用者資訊",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "user": {
                                            "type": "object"
                                        },
                                        "articles": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "favoriteLists": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "bio": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "找不到該使用者"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Article": {
                "title": "Article",
                "description": "文章資料結構",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 123
                    },
                    "user_id": {
                        "description": "作者 User ID",
                        "type": "integer",
                        "example": 1
                    },
                    "title": {
                        "type": "string",
                        "example": "探索東京的美食之旅"
                    },
                    "body": {
                        "type": "string",
                        "example": "這是一篇關於東京美食的詳細介紹..."
                    },
                    "published_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-09-10T08:00:00Z",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-08-20T10:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-09-05T15:30:00Z"
                    },
                    "category_id": {
                        "description": "文章分類 ID",
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "Category": {
                "title": "Category",
                "description": "文章分類資料結構，支持階層分類",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "旅遊"
                    },
                    "slug": {
                        "type": "string",
                        "example": "travel"
                    },
                    "parent_id": {
                        "description": "父分類ID，null代表無父分類",
                        "type": "integer",
                        "example": null,
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-09-01T00:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-09-10T00:00:00Z"
                    }
                },
                "type": "object"
            },
            "FavoriteList": {
                "title": "FavoriteList",
                "description": "使用者收藏清單資料結構",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "description": "收藏清單所屬使用者ID",
                        "type": "integer",
                        "example": 123
                    },
                    "name": {
                        "type": "string",
                        "example": "旅遊收藏"
                    },
                    "description": {
                        "type": "string",
                        "example": "收集所有旅遊相關文章",
                        "nullable": true
                    },
                    "articles_count": {
                        "description": "收藏清單中文章數量",
                        "type": "integer",
                        "example": 15
                    },
                    "is_default": {
                        "description": "是否為使用者的預設收藏清單",
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-09-01T08:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-09-10T10:30:00Z"
                    }
                },
                "type": "object"
            },
            "Tag": {
                "title": "Tag",
                "description": "標籤資料結構",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 10
                    },
                    "name": {
                        "type": "string",
                        "example": "旅行"
                    },
                    "slug": {
                        "type": "string",
                        "example": "travel"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-01-01T10:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-01-10T12:00:00Z"
                    }
                },
                "type": "object"
            },
            "User": {
                "title": "User",
                "description": "使用者資料結構",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "John Doe"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "john@example.com"
                    },
                    "avatar": {
                        "type": "string",
                        "format": "url",
                        "example": "https://example.com/avatar.jpg",
                        "nullable": true
                    },
                    "is_admin": {
                        "type": "boolean",
                        "example": false
                    },
                    "role": {
                        "type": "string",
                        "example": "editor"
                    },
                    "bio": {
                        "type": "string",
                        "example": "Full-stack developer from Tokyo."
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-09-01T00:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-09-10T10:10:00Z"
                    }
                },
                "type": "object"
            }
        }
    },
    "tags": [
        {
            "name": "Articles",
            "description": "文章相關操作"
        },
        {
            "name": "Users",
            "description": "使用者相關操作"
        },
        {
            "name": "Categories",
            "description": "Categories"
        },
        {
            "name": "Favorite Lists",
            "description": "Favorite Lists"
        }
    ]
}